///////////////////////////////////////////////////////////////////////////
// Srevolution 2010 / 2011
// Programmed by: Team Srevolution
// Website: www.xcoding.net
// File info: Public packet data
///////////////////////////////////////////////////////////////////////////
using System;
using Framework;
using System.Linq;
using System.Text;
using System.Threading;
using System.Data.SqlClient;
using System.Collections.Generic;

namespace SrxRevo
{
    public partial class Systems
    {
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        // Forgotten world base entrance
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        void ForgottenWorld(int itemid)
        {
            try
            {
                //Spawn portal
                obj o = new obj();

                double x = Character.Position.x;
                double z = Character.Position.z;
                double y = Character.Position.y;
                o.Ids = new Global.ID(Global.ID.IDS.Object);
                o.UniqueID = o.Ids.GetUniqueID;
                o.xSec = Character.Position.xSec;
                o.ySec = Character.Position.ySec;
                o.x = (o.xSec - 135) * 192 + (x) / 10;
                o.z = z;
                o.y = (o.ySec - 92) * 192 + (y) / 10;

                client.Send(Packet.SpawnPortal(o, Character, itemid));
            }
            catch (Exception ex)
            {
                Console.WriteLine("Portal spawn error : {0}", ex);
                Systems.Debugger.Write(ex);
            }
        }
    }
}
